(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{129:(e,t,s)=>{Promise.resolve().then(s.bind(s,1420))},1420:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5155),n=s(2115),a=s(5695),l=s(2528),i=s(5610),c=s(5317);function o(){let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)(0),[u,d]=(0,n.useState)(0),[f,m]=(0,n.useState)(15),[b,h]=(0,n.useState)(!1),[x,E]=(0,n.useState)(!0),{currentUser:g}=(0,l.A)(),v=(0,a.useRouter)();(0,n.useEffect)(()=>{if(!g)return void v.push("/");!async function(){try{let e=(0,c.rJ)(i.db,"questions"),s=(0,c.P)(e,(0,c.AB)(10)),r=(await (0,c.GG)(s)).docs.map(e=>({id:e.id,...e.data()})).sort(()=>.5-Math.random());t(r)}catch(e){console.error("Error fetching questions:",e)}finally{E(!1)}}()},[g,v]),(0,n.useEffect)(()=>{if(0===e.length||b)return;let t=setInterval(()=>{m(e=>e<=1?(_(null),15):e-1)},1e3);return()=>clearInterval(t)},[s,b,_,e.length]);let _=(0,n.useCallback)(async t=>{let r=t===e[s].correctAnswer;if(r?d(e=>e+10):d(e=>e-5),s===e.length-1){h(!0);try{await (0,c.gS)((0,c.rJ)(i.db,"scores"),{userId:g.uid,email:g.email,points:u+(r?10:-5),timestamp:(0,c.O5)()}),v.push("/results?pts=".concat(u+(r?10:-5)))}catch(e){console.error("Error saving score:",e)}}else o(e=>e+1),m(15)},[s,e,g,u,v]);if(x)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-500 to-purple-600 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"Loading questions..."})});if(0===e.length)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-500 to-purple-600 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"No questions available"})});let p=e[s];return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-500 to-purple-600 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{className:"text-lg font-semibold",children:["Score: ",u]}),(0,r.jsxs)("div",{className:"text-lg font-semibold",children:["Time: ",f,"s"]})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("div",{className:"h-2 bg-gray-200 rounded-full",children:(0,r.jsx)("div",{className:"h-2 bg-blue-600 rounded-full transition-all duration-1000",style:{width:"".concat(f/15*100,"%")}})})}),(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:p.question}),(0,r.jsx)("div",{className:"space-y-3",children:p.options.map((e,t)=>(0,r.jsx)("button",{onClick:()=>_(e),className:"block w-full text-left p-3 border rounded-md hover:bg-gray-50 transition-colors",children:e},t))})]})})}},2528:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>o});var r=s(5155),n=s(2115),a=s(5610),l=s(6203);let i=(0,n.createContext)();function c(){return(0,n.useContext)(i)}function o(e){let{children:t}=e,[s,c]=(0,n.useState)(null),[o,u]=(0,n.useState)(!0);return(0,n.useEffect)(()=>(0,l.hg)(a.j,e=>{c(e),u(!1)}),[]),(0,r.jsx)(i.Provider,{value:{currentUser:s,signup:function(e,t){return(0,l.eJ)(a.j,e,t)},login:function(e,t){return(0,l.x9)(a.j,e,t)},logout:function(){return(0,l.CI)(a.j)}},children:!o&&t})}},5610:(e,t,s)=>{"use strict";s.d(t,{db:()=>o,j:()=>c});var r=s(3915),n=s(6203),a=s(5317),l=s(9509);for(let e of["NEXT_PUBLIC_FIREBASE_API_KEY","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN","NEXT_PUBLIC_FIREBASE_PROJECT_ID","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID","NEXT_PUBLIC_FIREBASE_APP_ID"])if(!l.env[e])throw Error("Missing required environment variable: ".concat(e));let i=(0,r.Wp)({apiKey:"AIzaSyCmbXbDg_Lwi-QO0vZr0b5vPPsWG9wdeO8",authDomain:"knowball-ecbb6.firebaseapp.com",projectId:"knowball-ecbb6",storageBucket:"knowball-ecbb6.firebasestorage.app",messagingSenderId:"719725276363",appId:"1:719725276363:web:47c2e93a055288d37c7f4e"}),c=(0,n.xI)(i),o=(0,a.aU)(i)},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[992,118,645,441,684,358],()=>t(129)),_N_E=e.O()}]);