(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{1294:(e,t,s)=>{Promise.resolve().then(s.bind(s,2319))},2319:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5155),i=s(2115),a=s(5695),l=s(5333),n=s(6631);function o(){let[e,t]=(0,i.useState)([]),[s,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),u=(0,a.useRouter)(),h=(0,n.A)();return((0,i.useEffect)(()=>{(async()=>{try{let{data:{user:e},error:s}=await l.N.auth.getUser();if(s)throw s;o(e);let{data:r,error:i}=await l.N.from("scores").select("user_id, score, total_questions").order("score",{ascending:!1}).limit(10);if(i)throw i;let a=r.map(e=>e.user_id),{data:n,error:c}=await l.N.from("profiles").select("id, email").in("id",a);if(c)throw c;let d=r.map(e=>{var t;return{...e,email:(null==(t=n.find(t=>t.id===e.user_id))?void 0:t.email)||"Anonymous"}});t(d)}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}})()},[]),c||h)?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-500 to-purple-600 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-500 to-purple-600 flex flex-col items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Leaderboard"}),(0,r.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,r.jsx)("div",{className:"p-4 rounded-lg ".concat(e.user_id===(null==s?void 0:s.id)?"bg-blue-100 border-2 border-blue-500":"bg-gray-50"),children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("span",{className:"font-bold text-gray-800",children:[t+1,". ",e.email]})}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("span",{className:"text-gray-600",children:[e.score,"/",e.total_questions]})})]})},e.user_id))}),(0,r.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,r.jsx)("button",{onClick:()=>u.push("/quiz"),className:"block w-full bg-blue-600 text-white text-center py-3 rounded-lg hover:bg-blue-700 transition duration-200",children:"Play Again"}),(0,r.jsx)("button",{onClick:()=>u.push("/home"),className:"block w-full bg-gray-200 text-gray-800 text-center py-3 rounded-lg hover:bg-gray-300 transition duration-200",children:"Back to Home"})]})]})})}},5333:(e,t,s)=>{"use strict";s.d(t,{N:()=>l});var r=s(851);let i="https://xybazndugmjeeqxvlwgd.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5YmF6bmR1Z21qZWVxeHZsd2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU2ODgyMjIsImV4cCI6MjA2MTI2NDIyMn0.MZwuXD103K1XGjr0_NdYiqdmk_YDF7VNN78aNSoQzNU";if(!i||!a)throw Error("Missing Supabase environment variables");let l=(0,r.UU)(i,a)},6631:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(2115),i=s(5695),a=s(5333);function l(){let[e,t]=(0,r.useState)(!0),s=(0,i.useRouter)();return(0,r.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:r}=await a.N.auth.getSession();if(r)throw r;if(!e)return void s.push("/login");t(!1)}catch(e){console.error("Auth check error:",e),s.push("/login")}})()},[s]),e}}},e=>{var t=t=>e(e.s=t);e.O(0,[125,441,684,358],()=>t(1294)),_N_E=e.O()}]);