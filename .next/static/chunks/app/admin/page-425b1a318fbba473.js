(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{2940:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(5155),i=s(2115),n=s(5333),o=s(6631);function a(){let[e,t]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(!1),[h,x]=(0,i.useState)(null),[m,p]=(0,i.useState)({question:"",options:["","","",""],correct_answer:""}),b=(0,o.A)();(0,i.useEffect)(()=>{(async()=>{try{let{data:{user:e},error:t}=await n.N.auth.getUser();if(t)throw t;let{data:s,error:r}=await n.N.from("profiles").select("is_admin").eq("id",e.id).single();if(r)throw r;u((null==s?void 0:s.is_admin)||!1),(null==s?void 0:s.is_admin)||c("You do not have admin privileges")}catch(e){console.error("Error checking admin status:",e),c("Error checking admin privileges")}})()},[]),(0,i.useEffect)(()=>{d&&N()},[d]);let N=async()=>{try{let{data:e,error:s}=await n.N.from("questions").select("*").order("id");if(s)throw s;t(e)}catch(e){console.error("Error fetching questions:",e),c("Failed to load questions")}finally{a(!1)}},w=async e=>{e.preventDefault();try{let{error:e}=await n.N.from("questions").insert([{question:m.question,options:m.options,correct_answer:m.correct_answer}]);if(e)throw e;p({question:"",options:["","","",""],correct_answer:""}),N()}catch(e){console.error("Error adding question:",e),c("Failed to add question")}},f=async e=>{e.preventDefault();try{let{error:e}=await n.N.from("questions").update({question:m.question,options:m.options,correct_answer:m.correct_answer}).eq("id",h.id);if(e)throw e;x(null),p({question:"",options:["","","",""],correct_answer:""}),N()}catch(e){console.error("Error updating question:",e),c("Failed to update question")}},j=async e=>{if(confirm("Are you sure you want to delete this question?"))try{let{error:t}=await n.N.from("questions").delete().eq("id",e);if(t)throw t;N()}catch(e){console.error("Error deleting question:",e),c("Failed to delete question")}},g=e=>{x(e),p({question:e.question,options:e.options,correct_answer:e.correct_answer})};return s||b?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-500 to-purple-600 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):d?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-500 to-purple-600 p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-8",children:"Question Management"}),l&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:h?"Edit Question":"Add New Question"}),(0,r.jsxs)("form",{onSubmit:h?f:w,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 mb-2",children:"Question"}),(0,r.jsx)("input",{type:"text",value:m.question,onChange:e=>p({...m,question:e.target.value}),className:"w-full border rounded p-2",required:!0})]}),m.options.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-gray-700 mb-2",children:["Option ",t+1]}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>{let s=[...m.options];s[t]=e.target.value,p({...m,options:s})},className:"w-full border rounded p-2",required:!0})]},t)),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 mb-2",children:"Correct Answer"}),(0,r.jsxs)("select",{value:m.correct_answer,onChange:e=>p({...m,correct_answer:e.target.value}),className:"w-full border rounded p-2",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select correct answer"}),m.options.map((e,t)=>(0,r.jsxs)("option",{value:e,children:["Option ",t+1]},t))]})]}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:h?"Update Question":"Add Question"}),h&&(0,r.jsx)("button",{type:"button",onClick:()=>{x(null),p({question:"",options:["","","",""],correct_answer:""})},className:"ml-4 bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Cancel"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Questions List"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"table-auto w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Question"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Options"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Correct Answer"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"px-4 py-2",children:e.question}),(0,r.jsx)("td",{className:"px-4 py-2",children:e.options.join(", ")}),(0,r.jsx)("td",{className:"px-4 py-2",children:e.correct_answer}),(0,r.jsxs)("td",{className:"px-4 py-2",children:[(0,r.jsx)("button",{onClick:()=>g(e),className:"text-blue-600 hover:text-blue-800 mr-2",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},e.id))})]})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-500 to-purple-600 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:l})]})})}},5333:(e,t,s)=>{"use strict";s.d(t,{N:()=>o});var r=s(851);let i="https://xybazndugmjeeqxvlwgd.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5YmF6bmR1Z21qZWVxeHZsd2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU2ODgyMjIsImV4cCI6MjA2MTI2NDIyMn0.MZwuXD103K1XGjr0_NdYiqdmk_YDF7VNN78aNSoQzNU";if(!i||!n)throw Error("Missing Supabase environment variables");let o=(0,r.UU)(i,n)},6631:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(2115),i=s(5695),n=s(5333);function o(){let[e,t]=(0,r.useState)(!0),s=(0,i.useRouter)();return(0,r.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:r}=await n.N.auth.getSession();if(r)throw r;if(!e)return void s.push("/login");t(!1)}catch(e){console.error("Auth check error:",e),s.push("/login")}})()},[s]),e}},8691:(e,t,s)=>{Promise.resolve().then(s.bind(s,2940))}},e=>{var t=t=>e(e.s=t);e.O(0,[125,441,684,358],()=>t(8691)),_N_E=e.O()}]);